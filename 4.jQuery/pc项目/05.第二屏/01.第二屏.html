<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

<div id="wrap">
    <!--头部-->
    <header id="header">
        <section class="headerMain">
            <!--logo-->
            <h1 class="logo">
                <a href="javascript:;">
                    <img src="img/logo.png" alt="">
                </a>
            </h1>
            <!--nav-->
            <nav class="nav">
                <ul class="clearfix">
                    <li>
                        <a href="javascript:;">
                            <div class="up"><img src="img/home_gruen.png" alt=""></div>
                            <div class="down"><img src="img/home.png" alt=""></div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Course</div>
                            <div class="down">Course</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Works</div>
                            <div class="down">Works</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">About</div>
                            <div class="down">About</div>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <div class="up">Team</div>
                            <div class="down">Team</div>
                        </a>
                    </li>
                </ul>
            </nav>
            <!--小尖尖-->
            <div class="arrow"></div>
        </section>
    </header>
    <!--内容区-->
    <section id="content">
        <ul class="list">
            <li class="home">
                <div>home</div>
            </li>
            <li class="course">
                <div>
                    <header class="course1">
                        <h2 class="commonTitle">
                            <span>EINBLICK</span><br>
                            <span>ERKENNTNIS</span><br>
                            <span>ERGEBNIS</span>
                        </h2>
                    </header>
                    <div class="course2">
                        <p class="commonText">Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                            Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.</p>
                    </div>
                    <div class="course3">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>

                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                        <div class="item">
                            <div class="front"></div>
                            <div class="back">今天天气真不错</div>
                        </div>
                    </div>
                </div>
            </li>
            <li class="works">
                <div>
                    <header class="works1">
                        <h2 class="commonTitle">
                            <span>EINBLICK</span><br>
                            <span>ERKENNTNIS</span><br>
                            <span>ERGEBNIS</span>
                        </h2>
                    </header>
                    <div class="works2">
                        <div class="item">
                            <img src="img/worksimg1.jpg" alt="">
                            <div class="mask">
                                <span>今天天气真不错</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="img/worksimg2.jpg" alt="">
                            <div class="mask">
                                <span>今天天气真不错</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="img/worksimg3.jpg" alt="">
                            <div class="mask">
                                <span>今天天气真不错</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                        <div class="item">
                            <img src="img/worksimg4.jpg" alt="">
                            <div class="mask">
                                <span>今天天气真不错</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                    </div>
                    <div class="works3"></div>
                </div>
            </li>
            <li class="about">
                <div>
                    <header class="about1">
                        <h2 class="commonTitle">
                            <span>DIE</span><br>
                            <span>SPEZIELLE</span><br>
                            <span>VIELFALT</span>
                        </h2>
                    </header>
                    <div class="about2">
                        <p class="commonText">Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen</p>
                    </div>
                    <div class="about3">
                        <div class="item">
                            <span></span>
                            <ul data-src="img/about1.jpg"></ul>
                        </div>
                        <div class="item">
                            <span></span>
                            <ul data-src="img/about3.jpg"></ul>
                        </div>
                    </div>
                </div>
            </li>
            <li class="team">
                <div>Team</div>
            </li>
        </ul>
    </section>
</div>


</body>
<script type="text/javascript">
    window.onload = function () {
        //获取元素
        var header = document.getElementById('header')
        var liNodes = document.querySelectorAll('#header .headerMain .nav ul li')
        var upNodes = document.querySelectorAll('#header .headerMain .nav ul li .up')
        var arrow = document.querySelector('#header .headerMain .arrow')

        var content = document.getElementById('content');
        var contentLi = document.querySelectorAll('#content .list li');
        var contentList = document.querySelector('#content .list');
        var aboutUl = document.querySelectorAll('#content .list .about .about3>.item>ul');
        var now = 0;
        var timer = null;

//        图片炸裂
        picBoom();
        function picBoom() {
            for (var i=0;i<aboutUl.length;i++){
                changImg(aboutUl[i])
            }
            function changImg(ul) {
                var w = ul.offsetWidth/2;
                var h = ul.offsetHeight/2;
                var imgSrc = ul.dataset.src;
//              创建li
                for (var i = 0; i < 4; i++) {
                    var liNode = document.createElement('li');
//              li需要设置宽高
                    liNode.style.width = w+'px';
                    liNode.style.height = h+'px';
//                    li里边需要添加图片
                    var imgNode = new Image();
                    imgNode.src = imgSrc;
                    ul.appendChild(liNode);
//                0     l:0    t:0
//                1    l:-w   t:0
//                2    l:0    t:-h
//                3    l:-w   t:-h
                    imgNode.style.top= -Math.floor(i/2)*h+'px';
                    imgNode.style.left=-(i%2)*w+'px';
                    liNode.appendChild(imgNode);
                }
                var imgNodes = ul.querySelectorAll('li img');
                ul.onmouseenter = function () {
                    imgNodes[0].style.top = h+'px';
                    imgNodes[1].style.left = -2*w+'px';
                    imgNodes[2].style.left = w+'px';
                    imgNodes[3].style.top = -2*h+'px';
                };
                ul.onmouseleave = function () {
                    imgNodes[0].style.top = 0+'px';
                    imgNodes[1].style.left = -w+'px';
                    imgNodes[2].style.left = 0+'px';
                    imgNodes[3].style.top = -h+'px';
                }
            }
        }
        move(1)
//        滚轮
        document.onmousewheel = function (event) {
            clearTimeout(timer);
            timer = setTimeout(function () {
                fun(event);
            },200)

        };
        document.addEventListener && document.addEventListener('DOMMouseScroll',function (event) {
            clearTimeout(timer);
            timer = setTimeout(function () {
                fun(event);
            },200)
        });
        function fun(event) {
            event = event || window.event;
            var flag = '';
//            判断浏览器
            if (event.wheelDelta){
//                判断方向
                if(event.wheelDelta > 0){
//                    上
                    flag = 'up'
                }else {
//                    下
                    flag = 'down'
                }
            }else if (event.detail){
                if (event.detail < 0){
//                        上
                    flag = 'up'
                }else {
//                        下
                    flag = 'down'
                }
            }
            switch (flag){
                case  'up':
                    if(now > 0){
                        now--;
                    }
                    move(now);
                    break;
                case  'down':
                    if (now < liNodes.length-1){
                        now++;
                    }
                    move(now);
                    break;
            }
            event.preventDefault && event.preventDefault();
            return false;
        }

//      当视口发生改变时 更新内容区域高度 更新小尖尖位置
        window.onresize = function () {
            contenBind();
            arrow.style.left = liNodes[now].getBoundingClientRect().left+liNodes[now].offsetWidth/2-arrow.offsetWidth/2 + 'px';
            //屏幕切换
            contentList.style.top = -now*(document.documentElement.clientHeight-header.offsetHeight) + 'px'
        }
        contenBind();
        function contenBind() {
            //设置内容区高
            content.style.height = document.documentElement.clientHeight-header.offsetHeight+'px';
            for (var i = 0; i < contentLi.length; i++) {
                contentLi[i].style.height = document.documentElement.clientHeight-header.offsetHeight+'px';
            };
        }

        headerBind();
        function headerBind() {
            //第一个up宽度
            upNodes[0].style.width = '100%';

            //小尖尖位置
            arrow.style.left = liNodes[0].getBoundingClientRect().left+liNodes[0].offsetWidth/2-arrow.offsetWidth/2 + 'px';

            //
            for (var i = 0; i < liNodes.length; i++) {
                liNodes[i].index = i;

                liNodes[i].onclick = function () {
                    now = this.index;
                    move(now)
                }
            }
        }
//        屏幕切换  更新小尖尖位置和导航区域高亮
        function move(now) {
            //1.up宽度 == 0
            for (var j = 0; j < upNodes.length; j++) {
//                    upNodes[j].style.width = '0';
                upNodes[j].style.width = '';
            };
            //2. this 下 up宽度 == 100%
            upNodes[now].style.width = '100%';

            //小尖尖位置
            arrow.style.left = liNodes[now].getBoundingClientRect().left+liNodes[now].offsetWidth/2-arrow.offsetWidth/2 + 'px';

            //屏幕切换
            contentList.style.top = -now*(document.documentElement.clientHeight-header.offsetHeight) + 'px'
        }




    };

</script>
</html>